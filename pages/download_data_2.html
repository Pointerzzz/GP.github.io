<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>数据集下载</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&display=swap">
    <link rel="stylesheet" type="text/css" href="../assets/css/index.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/navbar.css">
    <link rel="stylesheet" href="../assets/css/optimize.css">
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/download_data.css">
    <script type="text/javascript"
        src="https://webapi.amap.com/maps?v=2.0&key=e769a3af2b315d06adf04e42841ec191"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script>
        window.addEventListener('load', function () {
            var loader = document.getElementById('loader');

            setTimeout(function () {
                loader.style.display = 'none';
            }, 2000);
        });
    </script>
    <style>
        .tab.yield {
            left: -30px;
            background-color: #A3E6B8; /* 产量标签使用绿色 */
            z-index: 2;
        }
        .tab.n2o {
            left: 0px; /* 初始状态缩进 */
            background-color: #FFC0CB; /* N2O标签使用粉色 */
            z-index: 1;
            transition: left 0.5s ease;
        }
        .tab.yield:hover {
            left: 0; /* 鼠标悬停时完全展开 */
        }
    </style>
</head>
<body>
    <div id="loader">
        <img src="../IMG/loader.gif" alt="Loading...">
    </div>

    <div class="header">
        <div>
            <nav class="navbar navbar-expand-md">
                <!-- <a href="../index.html" class="navbar-brand"><img src="../IMG/NJAU.png" alt="" class="logo"></a> -->
                <a href="../index.html" class="navbar-brand"><img src="../IMG/ZJU.png" alt="" class="logo2"></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navmenu">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navmenu">
                    <ul class="nav-list navbar-nav ms-auto">
                        <div class="second nav-item">
                            <img class="ims" src="../IMG/icon1.png" alt="">
                            <li class="cool-link first"><a href="../index.html">
                                    <div class="nav-link">首页</div>
                                </a>
                                <ul></ul>
                            </li>
                        </div>
                        <div class="second nav-item">
                            <img class="ims" src="../IMG/icon1.png" alt="">
                            <li class="cool-link first"><a href="#">
                                    <div class="nav-link">目标优化</div>
                                </a>
                                <ul>
                                    <li><a href="optimize.html">
                                            <div><img src="../IMG/icon2.png" alt="">产量最大化</div>
                                        </a></li>
                                    <li><a href="optimize_N.html">
                                            <div><img src="../IMG/icon2.png" alt="">施氮量Minimize</div>
                                        </a></li>
                                    <li><a href="optimize_N2O.html">
                                            <div><img src="../IMG/icon2.png" alt="">N2O Minimize</div>
                                        </a></li>
                                </ul>
                            </li>
                        </div>
                        <div class="second nav-item">
                            <img class="ims" src="../IMG/icon1.png" alt="">
                            <li class="cool-link first"><a href="carbonFootprint.html">
                                    <div class="nav-link">碳足迹</div>
                                </a>
                                <ul></ul>
                            </li>
                        </div>
                        <div class="second nav-item">
                            <img class="ims" src="../IMG/icon1.png" alt="">
                            <li class="cool-link first"><a href="#">
                                    <div class="nav-link">下载中心</div>
                                </a>
                                <ul>
                                    <li><a href="download_model.html">
                                            <div><img src="../IMG/icon2.png" alt="">模型下载</div>
                                        </a></li>
                                    <li><a href="download_data.html">
                                            <div><img src="../IMG/icon2.png" alt="">数据下载</div>
                                        </a></li>
                                    <li><a href="download_png.html">
                                            <div><img src="../IMG/icon2.png" alt="">性能图片下载</div>
                                        </a></li>
                                </ul>
                            </li>
                        </div>
                    </ul>
                </div>
            </nav>
        </div>
    </div>

    <!-- 添加左侧标签 -->
    <div class="data-tabs">
        <a href="download_data.html" class="tab yield">产量</a>
        <a href="download_data_2.html" class="tab n2o active">N2O</a>
    </div>

    <div class="notebook">
        <h1 class="title">N2O数据集下载</h1>
        <div class="sticky-notes">
            <a href="../database_N2O.csv" class="sticky-note" style="height:288px;width:535px;font-size: xx-large;transform: rotate(-3deg);top:150px;left: 50px;">
                <h3>原始数据集</h3>
                <p>database_N2O.csv</p>
                <p>点击下载</p>
            </a>
            <a href="../figures/N2O/optimized_tea_n2o_results.csv" class="sticky-note" style="height:220px;width:450px;font-size: xx-large;transform: rotate(2deg);top:150px;left: 650px;">
                <h3>优化后数据集</h3>
                <p>optimized_tea.csv</p>
                <p>点击下载</p>
            </a>
            <a href="../tea_N2O_test.csv" class="sticky-note" style="height:288px;width:535px;font-size: xx-large;top:550px;left: 250px;">
                <h3>测试数据集</h3>
                <p>tea_N2O_test.csv</p>
                <p>点击下载</p>
            </a>
        </div>
    </div>

    <script>
        // 导航菜单交互
        var nav = document.querySelectorAll('.second');
        for (var i = 0; i < nav.length; i++) {
            nav[i].addEventListener('mouseenter', function () {
                var first = this.querySelector('.first');
                var secondChild = first.children[1];
                var img = this.querySelector('.ims');

                secondChild.style.opacity = "0";
                secondChild.style.transition = "opacity 0.5s";
                secondChild.style.display = "block";

                setTimeout(function () {
                    secondChild.style.opacity = "1";
                }, 200);

                img.classList.add("fade-out");

                img.addEventListener("transitionend", function () {
                    img.src = "../IMG/icon2.png";
                    img.classList.remove("fade-out");
                }, { once: true });
            });

            nav[i].addEventListener('mouseleave', function () {
                var first = this.querySelector('.first');
                var secondChild = first.children[1];
                var img = this.querySelector('.ims');

                secondChild.style.opacity = "0";
                secondChild.style.transition = "opacity 0.3s";

                img.classList.add("fade-out");

                img.addEventListener("transitionend", function () {
                    secondChild.style.display = "none";
                    img.src = "../IMG/icon1.png";
                    img.classList.remove("fade-out");
                }, { once: true });
            });
        }

        // 响应式布局调整
        window.addEventListener('DOMContentLoaded', function () {
            updateLayout(); // 页面加载时初始化布局
            
            // 标记当前活动标签
            var currentPath = window.location.pathname;
            var tabs = document.querySelectorAll('.tab');
            tabs.forEach(function(tab) {
                if(tab.getAttribute('href') && currentPath.includes(tab.getAttribute('href'))) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
        });

        window.addEventListener('resize', function () {
            updateLayout();
        });

        function updateLayout() {
            if (window.innerWidth < 768) {
                var img = document.getElementsByClassName('ims');
                for (var i = 0; i < img.length; i++) {
                    img[i].style.width = '15%';
                }

                var secondUls = document.querySelectorAll('.second ul');
                secondUls.forEach(function (ul) {
                    ul.style.top = '0';
                    ul.style.right = '80px';
                    ul.style.width = '375%';
                });
                
                // 小屏幕时调整标签位置
                document.querySelector('.data-tabs').style.top = '120px';
            } else {
                var img = document.getElementsByClassName('ims');
                for (var i = 0; i < img.length; i++) {
                    img[i].style.width = '22%';
                }

                var secondUls = document.querySelectorAll('.second ul');
                secondUls.forEach(function (ul) {
                    ul.style.top = '40px';
                    ul.style.right = '-45px';
                    ul.style.width = '268%';
                });
                
                // 大屏幕时调整标签位置
                document.querySelector('.data-tabs').style.top = '150px';
            }
        }
    </script>
</body>
</html>